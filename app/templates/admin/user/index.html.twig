{% extends "base.html.twig" %}

{% block title %}
{{parent()}}
-
{{title}}
{% endblock %}

{% block body %}
<h1 class="users-title jumbotron">{{title}}</h1>
{% if message is empty%}
{% else %}
<div class="alert alert-success">
    {{message.content}}
</div>

{% endif %}
<div class="container-fluid">
    <a href="index.php?user-form=0" class="btn btn-primary" style="margin-bottom:20px;">Ajouter</a>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Nom</th>
                <th>Email</th>
                <th>Création</th>
                <th>Role</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{user.name}}</td>
                <td>{{user.email}}</td>
                <td>{{user.created_at}}</td>
                <td>
                    <form action="index.php?admin-user=role" method="POST">
                        <select name="role" id="role">
                            <option value="user" {% if user.role=="user" %} selected="selected" {% endif %}>Utilisateur
                            </option>
                            <option value="editor" {% if user.role=="editor" %} selected="selected" {% endif %}>Editeur
                            </option>
                            <option value="admin" {% if user.role=="admin" %} selected="selected" {% endif %}>Admin
                            </option>
                        </select>
                </td>
                <td width="250">
                    <div class="row">
                        <input type="hidden" name="id_user" value="{{user.id}}">
                        <input type="submit" class="btn btn-primary" value="Enregistrer">
                        </form>
                        <form action="index.php?admin-user-delete={{user.id}}" method="POST"
                            onclick="return confirm('Êtes-vous sûre ?')">
                            <input type="hidden" name="_method" value="DELETE">
                            <button class="btn btn-danger">
                                <span class="glyphicon glyphicon-remove">supprimer</span>
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}